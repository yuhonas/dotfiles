- name: update homebrew
  homebrew: update_homebrew=yes

- name: applications
  homebrew_cask: name={{ item }} state=present
  with_items:
    - 1password
    - alfred
    # - bitbar
    # - drop-to-gif
    # - evernote
    # - firefox
    # - google-drive
    # - handbrake
    # - insomnia
    # - keybase
    # - libreoffice
    - rectangle
    # - skype
    - signal
    - spotify
    - tor-browser
    # - uninstallpkg
    - vlc

# the version of bash that ships with macos (3.2.x) at the time
# is super old and breaks the tmux fingers plugin
- name: install a modern version of bash
  homebrew: name=bash state=latest

- name: developer applications
  homebrew_cask: name={{ item }} state=present
  with_items:
    # - alacritty
    # - dash
    # - gitkraken
    - kitty
    # - iterm2
    # - postico
    # - sequel-pro
    # - sourcetree
    # - vagrant-manager
    - visual-studio-code

# - name: quicklook plugins
#   homebrew_cask: name={{ item }} state=present
#   with_items:
#     - betterzipql
#     - qlcolorcode
#     - qlmarkdown
#     - qlstephen
#     - quicklook-json

# - name: link qt
#   homebrew: name=qt state=linked

# - name: create alfred configuration directory
#   file:
#     path: "{{ ansible_env.HOME }}/Library/Application Support/Alfred 3/Alfred.alfredpreferences/preferences/features/websearch"
#     mode: 0644
#     state: directory

# - name: symlink alfred configuration
#   file:
#     src: "{{ role_path }}/files/alfred/prefs.plist"
#     dest: "{{ ansible_env.HOME }}/Library/Application Support/Alfred 3/Alfred.alfredpreferences/preferences/features/websearch/prefs.plist"
#     state: link
#     force: true
